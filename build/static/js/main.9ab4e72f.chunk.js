(this.webpackJsonplesson7=this.webpackJsonplesson7||[]).push([[0],{23:function(e,t,n){e.exports=n(45)},28:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(11),o=n.n(i),s=(n(28),n(13)),c=n(1),u=n.n(c),h=n(5),l=n(8);function d(e){return f.apply(this,arguments)}function f(){return(f=Object(h.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/move",e.next=3,fetch("/move",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=Object(l.b)({name:"game",initialState:{loading:!1,x:100,y:100,error:{}},reducers:{getMoveStart:function(e){e.loading=!0},getMoveSuccess:function(e,t){var n=t.payload,r=n.x,a=n.y;e.x+=r,e.y+=a,e.loading=!1,e.error=null},getMoveFailure:function(e,t){e.loading=!1,e.error=t.payload}}}),p=v.actions,g=p.getMoveStart,y=p.getMoveSuccess,b=p.getMoveFailure,x=v.reducer,m=function(e){return function(){var t=Object(h.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(g()),t.next=4,d(e);case 4:r=t.sent,n(y(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(b(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()};function k(){var e=Object(s.b)();return a.a.createElement("div",null,a.a.createElement("div",{className:"game"},a.a.createElement("button",{onClick:function(){return e(m({x:-10}))}},"\ud83e\udc78"),a.a.createElement("button",{onClick:function(){return e(m({x:10}))}},"\ud83e\udc7a"),a.a.createElement("button",{onClick:function(){return e(m({y:-10}))}},"\ud83e\udc79"),a.a.createElement("button",{onClick:function(){return e(m({y:10}))}},"\ud83e\udc7b"),a.a.createElement("span",null)))}var w=n(6),j=n(7),O=n(3);var E=Object(l.b)({name:"login",initialState:{loading:!1,error:0,data:{}},reducers:{getLoginStart:function(e){e.loading=!0,e.error=null},getLoginSuccess:function(e,t){e.data=t.payload,e.loading=!1,e.error=null},getLoginFailure:function(e,t){e.loading=!1,e.error=t.payload}}}),M=E.actions,L=(M.getLoginStart,M.getLoginSuccess,M.getLoginFailure,E.reducer),S=Object(l.a)({reducer:{game:x,login:L}}),C=function(){function e(t){Object(w.a)(this,e),this.app=t}return Object(j.a)(e,[{key:"gameObj",value:function(){var e=O.e.from("https://pixijs.io/examples/examples/assets/bunny.png");return this.app.stage.addChild(e),e}},{key:"move",value:function(){this.app.observeStore(this.app.store,(function(e){return e.game}),this.move1,this.app.banny)}},{key:"move1",value:function(e,t){var n=e.x,r=e.y;t.x=n,t.y=r}},{key:"drawMap",value:function(e){var t=this.app.map.draw("0xDCDCDC");t.x=e.x,t.y=e.y,this.app.stage.addChild(t)}}]),e}(),F=n(22),q=function(){function e(t,n,r){Object(w.a)(this,e),this.hexList=[],this._generateHexagons(t,n,r)}return Object(j.a)(e,[{key:"_generateHexagons",value:function(e,t,n){for(var r=Math.sqrt(3)/2*n*2,a=0;a<e;a++)for(var i=0;i<t;i++)i%2?this.hexList.push(new z({x:0+2*n/4*3*i,y:0+r/2+r*a},i,a)):this.hexList.push(new z({x:0+2*n/4*3*i,y:0+r*a},i,a));this.hexList[10].block=!0,this.hexList[25].block=!0,this.hexList[40].block=!0,this.hexList[55].block=!0,this.hexList[70].block=!0,this.hexList[71].obj=!0}},{key:"findHex",value:function(e){return this.hexList.find((function(t){return t.x===e.x&&t.y===e.y}))}},{key:"pixelToHex",value:function(e,t){var n=2*e/3/20,r=(-e/3+Math.sqrt(3)/3*t)/20,a=-n-r;return this._cubeRound({x:n,y:r,z:a})}},{key:"_cubeRound",value:function(e){var t=Math.round(e.x),n=Math.round(e.y),r=Math.round(e.z),a=Math.abs(t-e.x),i=Math.abs(n-e.y),o=Math.abs(r-e.z);return a>i&&a>o?t=-n-r:i>o?n=-t-r:r=-t-n,{x:t,y:n,z:r}}},{key:"draw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=new O.a;function a(e,t,n){var r=60*n+30,a=Math.PI/180*r;return[e.x+t*Math.sin(a),e.y+t*Math.cos(a)]}for(var i=0;i<6;i++){var o=a({x:0,y:0},20,i);n.push.apply(n,Object(F.a)(o))}return this.hexList.forEach((function(a){var i=new O.b;i.lineStyle(1,e),t&&i.beginFill(t,1),a.block&&i.beginFill(3473658,1),i.drawPolygon(n),i.x=a.center.x,i.y=a.center.y,i.endFill(),r.addChild(i)})),r}}]),e}(),z=function e(t,n,r){Object(w.a)(this,e),this.center=t,this.q=n,this.r=r,this.x=this.q,this.y=this.r-(this.q-(1&this.q))/2,this.z=-this.x-this.y,this.block=!1,this.obj=!1,this.target=!1},H=function(){function e(){Object(w.a)(this,e),this.renderer=new O.d({width:800,height:400,backgroundColor:1087931}),this.ticker=new O.f,this.stage=new O.a,this.loader=new O.c,this.dispatch=S.dispatch,this.store=S,this.map=new q(10,10,20),this.draw=new C(this),this.banny=this.draw.gameObj(),this.ticker.add(this.render.bind(this),O.g.LOW),this.ticker.start()}return Object(j.a)(e,[{key:"render",value:function(){this.renderer.render(this.stage)}},{key:"observeStore",value:function(e,t,n,r){var a;function i(){var i=t(e.getState());i!==a&&n(a=i,r)}var o=e.subscribe(i);return i(),o}},{key:"destroy",value:function(){this.renderer.destroy(),this.ticker.stop()}},{key:"view",get:function(){return this.renderer.view}}]),e}();function N(){return Object(r.useEffect)((function(){var e=function(){var e=new H;return e.loader.load((function(){document.getElementById("pixi").appendChild(e.view),e.draw.move()})),e}();return e.destroy.bind(e)}),[]),a.a.createElement("div",{id:"pixi"})}n(44);var _=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"App-header"},a.a.createElement(N,null),a.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(s.a,{store:S},a.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.9ab4e72f.chunk.js.map